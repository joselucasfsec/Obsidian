Tags #Information-Gathering

### REGISTROS
SOA - START OD AUTHORITY(Responsável pelo Domínio)
A - Endereço IPV4
AAAA - Endereço IPV6
NS - NAME SERVER (SERVIDORES DE NOMES)
CNAME - CANONICAL NAME (APELIDO/ALIAS)
MX - MAIL EXCHANGE (SERVIDOR DE E-MAIL)
PTR - POINTER (MAPEIA IP PARA NOME)
HINFO - HOST INFORMATION (INFORMAÇÕES DO HOST)
TXT - TEXT STRING (EXEMPLOS:SPF)
Utilizar o host -t AAAA businesscorp.com.br para fazer as pesquisas.


### **Transferência de Zona**
Funciona na porta 53 **TC**P, quando não configurado corretamente pode retornar todos os

subdominios existentes, mais geralmente é configurado para somente ips autorizados conseguirem fazer a transferência. É necessario que o alvo tenha mais de um servidor de nome, para descobrir fazer a consulta:
``` 
host -t ns businesscorp.com.br
```
Comummente vai existir dois servidores CNAME, caso um pare de funcionar o segundo funcionando seu lugar.
Utilizando a ferramenta host com a opção -l ele vai tentar fazer um transferência de zona.
```
host -l businesscorp.com.br
```
Podemos fazer essa consulta utilizando os servidores CNAMEs retornados anteriormente.
```
host -l -a businnescorp.com.brns1.businesscorp.com.br
```
#### Bash automatizado:
```
for server in $(host -t ns tesla.com | cut -d " " -f4); do host -l -a tesla.com $server;done
```

### Brute Force DNS**/ **Pesquisa Direta

Quando não conseguir enumerar os subdomínios podemos partir para força-bruta.

#### FFUF
Start by figuring out the response lenght of false positive
```
curl -s -H “Host: naoexiste.alvo.com.br” http/alvo.com.br | wc -c 612
```
Filter out responses of lenght 612
``` 
ffuf -c -w wordlist.txt -u http://ffuf.io.fi -H “Host: FFUF.ffuf.io.fi" -fs 612
```
É muito comum ele retornar muitos falsos positivos, podemos identificar e filtrá-los.

**BASH**
``` 
for subdomain in $(cat lista.txt); do host $subdomain.businesscorp.com.br;done | grep -v “NXDOMAIN”
``` 
**Pesquisa reversa**
Ocorre quando temos o bloco de endereço IP e vamos tentar resolver ele para o endereço escrito. Utilizando a ferramenta host podemos pedir para ela já tentar resolver.
``` 
for ip in $(seq 224 239);do host -t ptr 37.59.174.$ip;done
```